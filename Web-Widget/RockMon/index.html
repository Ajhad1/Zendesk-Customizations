<!-- sets widgets intial settings -->
<script type="text/javascript">
	// sets widgets intial settings
	window.zESettings = {
		webWidget: {
			launcher: {
				// changes initial widget label to string provided
				label: {
					'*': ' '
				}
			},
			helpCenter: {
				// changes 1st ticket button to string provided
				messageButton: {
					'*': 'Submit A Ticket'
				}
			},
			contactOptions: {
				enabled: true,
				// changes 2nd ticket button to string provided
				contactButton: { '*': 'Submit A Ticket' }
			},
			contactForm: {
				// changes ticket title to string provided
				title: {
					'*': 'Submit A Ticket'
				},
				// Prefills fields
				fields: [
					// pulls url and enters into URL field
					// to do - add RockMon Variable
					{ id: '22736400', prefill: { '*': window.location.href } },
					// prefills description box with String
					{ id: 'description', prefill: { '*': 'Enter a Detailed Description Here' } },
					// prefills Enviroment with String
					// to do - add RockMon Variable
					{ id: '46633588', prefill: { '*': 'Prod' } },
					// prefills application name with String
					// to do - add RockMon Variable
					{ id: '48952228', prefill: { '*': 'RockMon' } },
					// prefills Steps to Reproduce with String
					// to do - add RockMon Variable
					//{ id: '360039260793', prefill: { '*': 'Enter Steps to Reproduce Here' } },
					// prefills Expected and Actual with String
					// to do - add RockMon Variable
					//{ id: '360039261073', prefill: { '*': 'Enter Expected vs Actual Here' } },
				]
			}
		}
	};
</script>

<!-- Start of Identity Fusion Zendesk Widget Initialization -->
<script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=472611d3-b79c-481f-a861-b740c508a040"> </script>
<!-- End of Identity Fusion Zendesk Widget Initialization -->

<!-- sets default article that explains how to use widget -->
<script type="text/javascript">
	// sets default article that explains how to use widget
	// to do - add this script to each page with appropriate search terms
	zE('webWidget', 'helpCenter:setSuggestions', { search: 'widget' });
</script>
<!-- adds user Identification via name and email -->
<!-- Turning off Identify feature for now for easier integration
<script type="text/javascript">
	// finds user in Zendesk
	// if there is no user that matches it will create one
	zE('webWidget', 'identify', {
		// to do - add RockMon Name Variable
		name: 'Akira Kogane',
		// to do - add RockMon Email Variable
		email: 'akira@voltron.com'
	});
</script>
-->
<!-- adds Prefilling to fields -->
<!-- Turning off Prefill for easier integration
<script type="text/javascript">
	zE('webWidget', 'prefill', {
		// prefills name
		// to do - add RockMon Name Variable
		name: {
			value: 'Akira Kogane',
			readOnly: true // optional
		},
		// prefills email
		// to do - add RockMon Email Variable
		email: {
			value: 'akira@voltron.com',
			readOnly: true // optional
		}
	});
</script>
-->
<!-- adds CSS to be added to the Web Widget for internals -->
<script type="text/javascript">
	// on-click of the web widget the following code will run
	zE('webWidget:on', 'open', function() {
		// creates any CSS to be added to the Web Widget for internals
		var style = document.createElement('style');
			style.innerHTML = `
				/* hides the zendesk link */
				.kkUEer {
					visibility: hidden;
				}
				/* hides the name field */
				/*
				#Embed > div > div > div > form > div > div.sc-cpmKsF.fvnioU > div:nth-child(1) {
					display: none;
				}
				*/
				/*
				/* hides the email field */
				#Embed > div > div > div > form > div > div.sc-cpmKsF.fvnioU > div:nth-child(2){
					display: none;
				}
				*/
				/*
				/* fixes margin for new top field */
				#Embed > div > div > div > form > div > div.sc-cpmKsF.fvnioU > div:nth-child(3){
					margin-top: 0px;
				}
				*/
				/* hides stupid description label */
				#Embed > div > div > div > form > div > div.sc-cpmKsF.fvnioU > div:nth-child(9) > div > label {
					display: none;
				}
				/* hides the url field */
				/*
				#Embed > div > div > div > form > div > div.sc-cpmKsF.fvnioU > div:nth-child(4){
					display: none;
				}
				*/
  			`;
		// appends the css in the web widget
		parent.document.getElementById('webWidget').contentDocument.head.appendChild(style);
			
	    // creates any CSS to be added to the Web Widget for launcher
		var style = document.createElement('style');
		style.innerHTML = `
				/* Hides text in widget badge next to Question Mark */
				#Embed > button > span.label-3kk12.Arrange-sizeFit.u-textInheritColor.u-inlineBlock {
				    display: none !important;
				}
				/*.label-3kk12 {
				    display: none !important;
				}*/
				/* fixes margin of the icon after removing label */
				#Embed > button > span.container-3PFIa.u-userColor.icon-3E9qF.Icon-2SEmO.Arrange-sizeFit.u-textInheritColor.u-inlineBlock.Icon {
				    padding-right: 0px;
				}
			`;
		// appends the css in the web widget
		parent.document.getElementById('launcher').contentDocument.head.appendChild(style);
		
		// Creates Script Variable
		/* attempt at adding javascript into iframe to change label - not working currently - turned off
		var script = document.createElement('script');
		// Inserts code into Script Variable
			script.innerHTML = `
				// Gets Selector of Description Label
				var labSelector = document.querySelector("#Embed > div > div > div > form > div > div.sc-cpmKsF.fvnioU > div:nth-child(7) > div > label");
				// if selector is correct changes text of label
				if (labSelector !== null) {
					labSelector.innerHTML = "Description";
				}
			`;
		// appends JS into iframe to run
		parent.document.getElementById('webWidget').contentDocument.body.innerHTML.appendChild(script);
		*/
  });
</script>
<!-- opens widget to run code above -->
<script type="text/javascript">
	// opens widget to run code above
	zE('webWidget', 'open');
</script>
<!-- closes widget to reset it -->
<script type="text/javascript">
	// closes widget to reset it
	zE('webWidget', 'toggle');
</script>
